# 컴포넌트 반복

## 자바스크립트 배열의 .map() 함수

자바스크립트 배열 내장 함수인 map()을 사용하여 반복되는 컴포넌트 렌더링  
map() 함수는 인자로 전달받은 함수를 사용해 배열 내 각 요소를 처리하여 새로운 배열 생성

### 문법
```js
arr.map(callback, [thisarg])
```

- callback : 새로운 배열의 요소를 생성하는 함수로 파라미터는 아래 세 가지
  - currentValue : 현재 처리하고 있는 요소
  - index : 현재 처리하고 있는 요소의 index 값
  - array : 현재 처리하고 있는 원본 배열
- thisArg(optional) : callback 함수 내에서 사용할 this 레퍼런스

## 데이터 배열을 컴포넌트 배열로 map 하기

map() 함수를 사용해 컴포넌트 반복 생성하기  
```js
const names = ['눈사람', '얼음', '눈', '바람'];
const nameList = names.map(
  (name) => (<li>{name}</li>)
);

return (
  <ul>
    {nameList}
  </ul>
)
```

## key

위 예제 App에 실행하여 생성 시, key prop이 없다는 경고 메시지가 뜹니다.  
key => 컴포넌트 배열을 렌더링했을 때 어떤 원소에 변동이 있었는지 알아내기 위해 사용.  
key가 없다면 Virtual DOM을 비교하는 과정에서 리스트를 순차적으로 비교합니다.  
key가 있을 땐 더 빠르게 변화 감지가 가능합니다.

### key 설정

key 값은 선언한 map 함수 내부에서 prop 설정하듯이 설정합니다. key 값은 언제나 유일해야 합니다.  
때문에 데이터가 가진 유일한 값을 사용하면 되는데, 없는 경우 map 함수 인자인 index를 활용할 수 있습니다.

```js
const nameList = names.map(
  (name, index) => (<li key={index}>{name}</li>)
);
```

## 응용

유동적인 데이터 렌더링 하기.
기존 코드에서 list 추가 및 제거 구현.

## 정리

- 컴포넌트 배열 렌더링 할 때, key 값 설정에 항상 주의
- key 값은 언제나 유일
- concat, slice, ..., filter등을 이용한 배열 수정
- state 값 수정은 setState()