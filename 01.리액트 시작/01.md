# 리액트 시작

![React.js](https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/React-icon.svg/220px-React-icon.svg.png)

## 왜 리액트인가 ❔

자바스크립트만으로도 규모가 큰 애플리케이션을 만들 수 있는 시대가 되었고, 만약 사용자와의 인터랙션이 많아야 하는 애플리케이션이라면 라이브러리 혹은 프레임워크의 도움을 받지 않고 DOM 요소들을 직접 관리하고 코드를 정리한다는 건 힘든 일이 되였습니다.

웹 개발을 할 때, `복잡해진 DOM 관리와 상태 값 업데이트 관리를 최소화하고, 기능 개발, 사용자 인터페이스 구현 등에 집중`할 수 있도록 하기 위해 여러 라이브러리/프레임워크가 만들어졌습니다. (ex. Angular, Ember, Backbone, Vue, React..)

이러한 프레임워크들은 MVC, MVVM, MVW 등의 아키텍처를 가지고 있습니다. 간단하게 MVC란 무엇인가를 간단하게 짚고 넘어가겠습니다.

---
<br>

### MVC?

MVC란 Model View Controller의 약자로 애플리케이션을 세 가지의 역할로 구분한 개발 방법론입니다. 아래 그림처럼 사용자가 Controller를 조작하면 Controller는 Model을 통해서 데이터를 가져오고 그 정보를 바탕으로 시각적인 표현을 담당하는 View를 제어해서 사용자에게 전달하게 됩니다.

![MVC](https://s3.ap-northeast-2.amazonaws.com/opentutorials-user-file/module/327/1262.png)

MVC 패턴을 웹에 적용하면 아래와 같습니다.

1. 사용자가 웹사이트에 접속한다. (Uses)
2. Controller는 사용자가 요청한 웹페이지를 서비스하기 위해서 모델을 호출한다. (Manipulates)
3. 모델은 데이터베이스나 파일과 같은 데이터 소스를 제어한 후에 그 결과를 반환한다.
4. Controller는 Model이 반환한 결과를 View에 반영한다. (Updates)
5. 데이터가 반영된 VIew는 사용자에게 보여진다. (Sees)

---

다시 돌아와서, 각 프레임워크/라이브러리들은 각자의 장단점을 가지고 있습니다. 우리는 리액트에 집중하겠습니다.

### 리액트 이해

리액트는 자바스크립트 라이브러리로 유저 인터페이스를 만드는 데 사용합니다. 구조가 MVC, MVW 등인 프레임워크와 달리, `V(View)에만 신경 쓰는 라이브러리입니다.`
리액트엔 컴포넌트(데이터를 넣으면 지정한 유저 인터페이스를 조립해 보여줌.)라는 개념에 집중이 되어있습니다.
사용자 화면에 뷰를 보여주는 것을 렌더링이라고 하는데, 리액트에선 뷰를 리액트 컴포넌트가 최초로 실행한 `초기 렌더링`과 컴포넌트의 데이터 변경으로 다시 실행되는 `리렌더링 개념`으로 성능을 아끼고, 최적의 유저 경험을 제공합니다.

#### 초기 렌더링

어떤 UI 관련 프레임워크, 라이브러리를 사용하든지 간에 가장 처음에 어떻게 보일지를 정하는 초기 렌더링이 필요합니다. 리액트에서는 이를 다루는 render 함수가 있습니다.
```js
render() { ... }
```
이 함수는 컴포넌트가 어떻게 생겼는지 정의하는 역할을 합니다. 이 함수는 html 형식의 문자열을 반환하지 않고, 뷰가 어떻게 생겼고 어떻게 동작하는지 정보를 지닌 객체를 반환합니다. 컴포넌트 내부에는 다른 컴포넌트들이 들어갈 수 있습니다. 이때 render 함수를 실행하면 그 내부에 있는 컴포넌트들도 재귀적으로 렌더링합니다. 이렇게 최상위 컴포넌트의 렌더링 작업이 끝나면 지니고 있는 정보들을 사용하여 HTML 마크업을 만들고, 이를 우리가 정하는 실제 페이지의 DOM 요소 안에 주입합니다.

#### 조화 과정
리액트에서 중요한 부분인 업데이트를 어떻게 진행하는지 알아보겠습니다. 우선 리액트에서 뷰를 업데이트할 때, `업데이트 과정을 거친다.`라고 하기보다 `조화 과정(reconciliation)을 거친다.`라고 하는 것이 더 정확한 표현입니다. 컴포넌트에서 데이터에 변화가 있을 때 우리가 보기엔 변화에 따라 뷰가 변형되는 것처럼 보이지만 사실 새로운 요소로 갈아 끼우기 때문입니다.  
이 작업 또한 render 함수가 맡아서 합니다. render 함수는 뷰가 어떻게 생겼고 어떻게 동작하는지 객체를 반환한다고 했었습니다. 컴포넌트는 데이터를 업데이트했을 때 단순히 업데이트한 값을 수정하는 것이 아니라, 새로운 데이터를 가지고 render 함수를 또다시 호출해서 새로운 데이터를 지닌 뷰를 생성합니다. 이때 render 함수가 반환하는 결과를 곧바로 DOM에 반영하지 않고, 이전에 render 함수가 만들었던 컴포넌트 정보와 현재 render 함수가 만든 컴포넌트 정보를 비교합니다.

![리렌더링](https://miro.medium.com/max/928/1*CqdIWZy0NMPQhYx2rKzo9g.png)

자바스크립트를 사용하여 두 가지 뷰를 최소한의 연산으로 비교 후, 둘의 차이를 알아내 최소한의 연산으로 DOM 트리를 업데이트하는 것입니다.
이와 같은 리액트의 동작에 대해 더 이해하려면 Virtual DOM에 대해 알아야 합니다.

---
<br>

## 리액트 특징 💬

### DOM이란❔

DOM은 Document Object Model의 약어입니다. 즉, 객체로 문서 구조를 표현하는 방법으로 XML이나 HTML로 작성합니다.
웹 브라우저는 DOM을 활용하여 객체에 자바스크립트와 CSS를 적용합니다. DOM은 트리 형태라서 특정 node를 찾거나 수정하거나 제거하거나 원하는 곳에 삽입할 수 있습니다.
![DOM tree](https://cdn-images-1.medium.com/max/1200/1*Z32YHoZNEgAHCaozilfDIA.png)

DOM API를 수많은 플랫폼과 웹 브라우저에서 사용하는데, DOM에는 동적 UI에 최적화되어있지 않다는 치명적인 문제점이 있습니다. HTML 자체는 정적이며 자바스크립트를 통해 동적으로 만들 수 있습니다.
큰 규모의 웹 애플리케이션을 생각해보면 수백, 수천 개의 데이터가 있고, 스크롤을 내릴 때마다 새로운 데이터가 계속해서 로딩됩니다(페이스북 포스트 한 개에 div 100개 정도). 이렇게 규모가 큰 웹 애플리케이션에서 DOM에 직접 접근하여 변화를 주다 보면 성능에 이슈(느려짐)가 발생하기 시작합니다.
`주의 : DOM 자체는 빠르지만, 웹 브라우저 단에서 DOM 변화 시, CSS를 다시 연산하고 레이아웃 구성하고, 페이지를 리페인트하는데 시간이 허비되는 것입니다.`
이러한 문제를 DOM을 최소한으로 조작하여 작업을 처리하는 방식으로 개선한 것이 리액트에서의 Virtual DOM입니다.

### Virtual DOM

[Virtual DOM에 동작방식 쉽게 설명한 영상](https://www.youtube.com/watch?v=BYbgopx44vo)  

Virtual DOM을 사용하면 실제 DOM에 접근하여 조작하는 대신, 이를 추상화한 자바스크립트 객체를 구성하여 사용합니다.
리액트에서 데이터가 변하여 웹 브라우저에 실제 DOM을 업데이트할 때, 다음 세 가지 절차를 밟습니다.
1. 데이터를 업데이트하면 전체 UI를 Virtual DOM에 리렌더링 합니다.
2. 이전 Virtual DOM에 있던 내용과 현재 내용을 비교합니다.
3. 바뀐 부분만 실제 DOM에 적용합니다.

![리렌더링](https://miro.medium.com/max/928/1*CqdIWZy0NMPQhYx2rKzo9g.png)

**주의 사항**
리액트의 탄생배경은 `지속해서 데이터가 변화하는 대규모 애플리케이션 구축`입니다. 따라서, 무조건 리액트를 적용한다고 해서 좋은 것은 아닙니다. 예를 들어 단순 라우팅만 있는 정적인 웹 페이지에서는 리액트의 진가를 발휘할 수 없습니다.  
`React -> UI를 업데이트 하는 과정에서 생기는 복잡함 해소, 쉽게 업데이트👍`

### 기타 특징 💡

일부 웹 프레임워크가 MVC 또는 MVW 등 구조를 지향하는 것과 달리 리액트는 V(View)만을 담당합니다. 리액트는 프레임워크가 아닌 라이브러리입니다. 다른 웹 프레임워크가 Ajax, 데이터모델링, 라우팅 등 기능을 내장하고 있는 반면, 리액트는 뷰만 신경쓰는 라이브러리이므로 기타 기능은 직접 구현 하거나 외부 라이브러리를 사용해야 합니다.(리액트 라우터, axios, 리덕스 등..)  
또한 리액트는 다른 웹 프레임워크나 라이브러리와 혼용할 수 있습니다.

---
<br>

## Node.js와 npm 🔧

리액트 프로젝트를 만들 때 Node.js와 npm을 반드시 먼저 설치해야 합니다. 그러므로 Node.js와 npm이 무엇인지 간단하게 짚고 넘어가겠습니다.  

### Node.js

Node.js는 크롬 V8 자바스크립트 엔진으로 빌드한 자바스크립트 런타임입니다. 이것으로 웹 브라우저 환경이 아닌 곳에서도 자바스크립트를 사용하여 연산할 수 있습니다. 2009년 Node.js를 출시한 이후 자바스크립트는 웹 브라우저 영역 외에 웹 서버는 물론, 모바일 애플리케이션, 데스크톱 애플리케이션 영역에서도 활약할 수 있게 되었습니다.  
리액트 애플리케이션은 웹 브라우저에서 실행되는 코드이므로 Node.js와 직접적인 연관은 없지만, 프로젝트를 개발하는데 필요한 주요 도구들이 Node.js를 사용하기 때문에 설치해야 합니다.(Babel, Webpack 등..)  

### npm

npm은 Node.js 패키지 매니저로 수 많은 개발자가 만든 모듈을 설치하고 해당 모듈 버전을 관리하는 도구입니다. 리액트 또한 하나의 모듈입니다.

## 참고
- 리액트를 다루는 기술(김민준 지음, 길벗)
- [VELOPERT.LOG](https://velopert.com/3612)
- [생활코딩 - CodeIgniter](https://opentutorials.org/module/327/3828)
- [Naukri engineering - Virtual DOM](https://medium.com/naukri-engineering/naukriengineering-virtual-dom-fa8019c626b)